{"version":3,"sources":["maths.ts","Arrow.tsx","BarycentricDemo.tsx","hooks.ts","Home.tsx","App.tsx","index.tsx"],"names":["Vec2","x","y","rhs","this","f","len","currentLen","scale","theta","cos","Math","sin","Mat2","timesVec","sqrt","a","b","c","d","det","Arrow","props","x1","y1","x2","y2","stroke","strokeWidth","className","wing1","rotate","PI","scaleTo","wing2","corner1","minus","corner2","classNames","fill","DragSubject","initState","origin","tri1","tri2","tri3","pt","drag","startDrag","type","payload","reducer","state","action","key","Origin","Pt","Tri1","Tri2","Tri3","dragSubjectToKey","BarycentricDemo","ref","onChange","onUp","React","useRef","useState","left","top","bounds","setBounds","useEffect","recomputeBounds","current","getBoundingClientRect","window","addEventListener","removeEventListener","handleMove","e","clientX","clientY","document","useMousePos","dispatch","moveMouse","useReducer","map","t1","t2","t3","p","u","v","baryCoords","leftInv","uStart","uEnd","plus","vStart","vEnd","f1","toPrecision","f2","f3","style","position","xmlns","width","height","viewBox","cx","cy","r","onMouseDown","Home","to","App","basename","process","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"2QAAaA,EAAb,WACE,WAAmBC,EAAkBC,GAAY,yBAA9BD,IAA6B,KAAXC,IADvC,wCAGE,SAAKC,GACH,OAAO,IAAIH,EAAKI,KAAKH,EAAIE,EAAIF,EAAGG,KAAKF,EAAIC,EAAID,KAJjD,mBAOE,SAAMC,GACJ,OAAO,IAAIH,EAAKI,KAAKH,EAAIE,EAAIF,EAAGG,KAAKF,EAAIC,EAAID,KARjD,mBAWE,SAAMG,GACJ,OAAO,IAAIL,EAAKK,EAAID,KAAKH,EAAGI,EAAID,KAAKF,KAZzC,qBAeE,SAAQI,GACN,IAAMC,EAAaH,KAAKE,MACxB,GAAmB,IAAfC,EACF,OAAOH,KAGT,IAAMC,EAAIC,EAAMC,EAChB,OAAOH,KAAKI,MAAMH,KAtBtB,oBAyBE,SAAOI,GACL,IAAMC,EAAMC,KAAKD,IAAID,GACfG,EAAMD,KAAKC,IAAIH,GACrB,OAAO,IAAII,EAAKH,EAAKE,GAAMA,EAAKF,GAAKI,SAASV,QA5BlD,iBA+BE,WACE,OAAOO,KAAKI,KAAKX,KAAKH,EAAIG,KAAKH,EAAIG,KAAKF,EAAIE,KAAKF,OAhCrD,KAoCaW,EAAb,WAIE,WACSG,EAAkBC,EAClBC,EAAkBC,GACxB,yBAFMH,IAEP,KAFyBC,IAEzB,KADOC,IACP,KADyBC,IAN7B,4CASE,SAAShB,GAAkB,IACjBa,EAAeZ,KAAfY,EAAGC,EAAYb,KAAZa,EAAGC,EAASd,KAATc,EAAGC,EAAMf,KAANe,EACTlB,EAASE,EAATF,EAAGC,EAAMC,EAAND,EACX,OAAO,IAAIF,EAAKgB,EAAIf,EAAIiB,EAAIhB,EAAGe,EAAIhB,EAAIkB,EAAIjB,KAZ/C,qBAeE,WAAiB,IACPc,EAAeZ,KAAfY,EAAGC,EAAYb,KAAZa,EAAGC,EAASd,KAATc,EAAGC,EAAMf,KAANe,EACXC,EAAMJ,EAAIG,EAAIF,EAAIC,EACxB,OAAO,IAAIL,EAAKM,GAAID,GAAID,EAAGD,GAAGR,MAAM,EAAIY,KAlB5C,mBAqBE,SAAMf,GAEJ,OAAO,IAAIQ,EAAKR,EADOD,KAAfY,EACeX,EADAD,KAAZa,EACmBZ,EADPD,KAATc,EACuBb,EADdD,KAANe,OAtBrB,K,OCOeE,EA9BqB,SAAAC,GAAU,IACpCC,EAAmDD,EAAnDC,GAAIC,EAA+CF,EAA/CE,GAAIC,EAA2CH,EAA3CG,GAAIC,EAAuCJ,EAAvCI,GAAIC,EAAmCL,EAAnCK,OAAQC,EAA2BN,EAA3BM,YAAaC,EAAcP,EAAdO,UAGvCC,EADO,IAAI9B,EAAKyB,EAAKF,EAAIG,EAAKF,GACjBO,OAAOpB,KAAKqB,GAAK,IAAIC,QAAQ,IAC1CC,EAAQJ,EAAMC,QAAQpB,KAAKqB,GAAK,GAChCG,EAAU,IAAInC,EAAKyB,EAAIC,GAAIU,MAAMN,GACjCO,EAAU,IAAIrC,EAAKyB,EAAIC,GAAIU,MAAMF,GAEvC,OACE,oBAAGL,UAAWS,IAAWT,EAAW,SAApC,UACE,sBACEN,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,OAAQA,EACRC,YAAaA,IAEf,sBACET,EAAC,YAAOM,EAAP,YAAaC,EAAb,2BACOS,EAAQlC,EADf,YACoBkC,EAAQjC,EAD5B,2BAEOmC,EAAQpC,EAFf,YAEoBoC,EAAQnC,EAF5B,mBAIDqC,KAAMZ,Q,IC3BTa,E,gBAAAA,K,gBAAAA,E,YAAAA,E,YAAAA,E,YAAAA,E,SAAAA,M,KAQL,IAmKMC,EAAmB,CACvBC,OAAQ,IAAI1C,EAAK,IAAK,KACtB2C,KAAM,IAAI3C,EAAK,IAAK,KACpB4C,KAAM,IAAI5C,EAAK,IAAK,KACpB6C,KAAM,IAAI7C,EAAK,IAAK,KACpB8C,GAAI,IAAI9C,EAAK,IAAK,KAClB+C,KAAM,MAgBR,SAASC,EAAUD,GACjB,MAAO,CACLE,KAAM,aACNC,QAASH,GAQb,SAASI,EAAQC,EAAcC,GAC7B,OAAQA,EAAOJ,MACb,IAAK,aACH,GAAKG,EAAML,KAEJ,CACL,IAAMO,EAyBd,SAA0BP,GACxB,OAAQA,GACN,KAAKP,EAAYe,OACf,MAAO,SACT,KAAKf,EAAYgB,GACf,MAAO,KACT,KAAKhB,EAAYiB,KACf,MAAO,OACT,KAAKjB,EAAYkB,KACf,MAAO,OACT,KAAKlB,EAAYmB,KACf,MAAO,QApCeC,CAAiBR,EAAML,MAC3C,MAAY,WAARO,EACK,2BAAKF,GAAZ,kBAAoBE,EAAMD,EAAOH,UAE1B,2BACFE,GADL,kBAEGE,GAhBYZ,EAgBUU,EAAMV,OAhBFI,EAgBUO,EAAOH,QAf/C,IAAIlD,EAAK8C,EAAG7C,EAAIyC,EAAOzC,EAAGyC,EAAOxC,EAAI4C,EAAG5C,MAOzC,OAAOkD,EAYX,IAAK,aACH,OAAO,2BACFA,GADL,IAEEL,KAAMM,EAAOH,UAEjB,IAAK,YACH,OAAO,2BACFE,GADL,IAEEL,KAAM,OAEV,QACE,OAAOK,EA/Bb,IAAyBV,EAAcI,EAkDxBe,MAlPuB,WACpC,IAAMC,ECZD,YAGgC,IAFrCC,EAEoC,EAFpCA,SACAC,EACoC,EADpCA,KAEMF,EAA4BG,IAAMC,OAAO,MADX,EAERD,IAAME,SAAS,CAAEC,KAAM,EAAGC,IAAK,IAFvB,mBAE7BC,EAF6B,KAErBC,EAFqB,KAmCpC,OA/BAN,IAAMO,WAAU,WACd,SAASC,IACP,GAAoB,OAAhBX,EAAIY,QAAkB,CAAC,IAAD,EACFZ,EAAIY,QAAQC,wBAA1BP,EADgB,EAChBA,KAAMC,EADU,EACVA,IACdE,EAAU,CAAEH,OAAMC,SAOtB,OAHAI,IAEAG,OAAOC,iBAAiB,SAAUJ,GAC3B,kBAAMG,OAAOE,oBAAoB,SAAUL,MACjD,CAACX,EAAKS,IAETN,IAAMO,WAAU,WACd,SAASO,EAAWC,GAAgB,IAC1BZ,EAAcE,EAAdF,KAAMC,EAAQC,EAARD,IACNY,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QAEjBnB,EAASkB,EAAUb,EAAMc,EAAUb,GAIrC,OADAc,SAASN,iBAAiB,YAAaE,GAChC,kBAAMI,SAASL,oBAAoB,YAAaC,MACtD,CAACT,EAAQP,IAEZE,IAAMO,WAAU,WAEd,OADAW,SAASN,iBAAiB,UAAWb,GAC9B,kBAAMmB,SAASL,oBAAoB,UAAWd,MACpD,CAACA,IAEGF,ED1BKsB,CAAY,CACtBrB,SAAU,SAAC9D,EAAGC,GAAJ,OAAUmF,EA0KxB,SAAmBpF,EAAWC,GAC5B,MAAO,CACL+C,KAAM,aACNC,QAAS,IAAIlD,EAAKC,EAAGC,IA7KQoF,CAAUrF,EAAGC,KAC1C8D,KAAM,kBAAMqB,EAiLP,CACLpC,KAAM,iBArLkC,EAKhBgB,IAAMsB,WAAWpC,EAASV,GALV,mBAKnCW,EALmC,KAK5BiC,EAL4B,KAOlC3C,EAAiCU,EAAjCV,OAPkC,MAclB,CAPiBU,EAAzBT,KAAyBS,EAAnBR,KAAmBQ,EAAbP,KAAaO,EAAPN,IAOa0C,KAL/C,SAAuB1C,GACrB,OAAO,IAAI9C,EAAK0C,EAAOzC,EAAI6C,EAAG7C,EAAGyC,EAAOxC,EAAI4C,EAAG5C,MAVP,mBAcnCuF,EAdmC,KAc/BC,EAd+B,KAc3BC,EAd2B,KAcvBC,EAduB,KAgBpCC,EAAIH,EAAGtD,MAAMqD,GACbK,EAAIH,EAAGvD,MAAMqD,GAEbM,EADgB,IAAIlF,EAAKgF,EAAE5F,EAAG6F,EAAE7F,EAAG4F,EAAE3F,EAAG4F,EAAE5F,GAAG8F,UAClBlF,SAAS8E,EAAExD,MAAMqD,IAI5CQ,EAASR,EACTS,EAAOT,EAAGU,KAAKT,EAAGtD,MAAMqD,GAAIjF,MAAMuF,EAAW9F,IAC7CmG,EAASF,EACTG,EAAOD,EAAOD,KAAKR,EAAGvD,MAAMqD,GAAIjF,MAAMuF,EAAW7F,IAGjDoG,GAAM,EAAIP,EAAW9F,EAAI8F,EAAW7F,GAAGqG,YAAY,GACnDC,EAAKT,EAAW9F,EAAEsG,YAAY,GAC9BE,EAAKV,EAAW7F,EAAEqG,YAAY,GAEpC,OACE,sBAAK1E,UAAU,mBAAf,UACE,sBAAK6E,MAAO,CAAEC,SAAU,YAAxB,UACE,sBACE7C,IAAKA,EACL8C,MAAM,6BACNC,MAlDI,IAmDJC,OAlDK,IAmDLC,QAAO,cApDH,IAoDG,YAnDF,KA8CP,UAQE,cAAC,EAAD,CACExF,GAAImB,EAAOzC,EACXuB,GAAIkB,EAAOxC,EACXuB,GAAIiB,EAAOzC,EAAI,GACfyB,GAAIgB,EAAOxC,EACX2B,UAAU,WAEZ,cAAC,EAAD,CACEN,GAAImB,EAAOzC,EACXuB,GAAIkB,EAAOxC,EACXuB,GAAIiB,EAAOzC,EACXyB,GAAIgB,EAAOxC,EAAI,GACf2B,UAAU,WAEZ,wBACEA,UAAU,kBACVmF,GAAItE,EAAOzC,EACXgH,GAAIvE,EAAOxC,EACXgH,EAAE,IACFC,YAAa,kBAAM9B,EAASrC,EAAUR,EAAYe,YAIpD,sBACEpC,EAAC,YAAOsE,EAAGxF,EAAV,YAAewF,EAAGvF,EAAlB,6BACKwF,EAAGzF,EADR,YACayF,EAAGxF,EADhB,6BAEKyF,EAAG1F,EAFR,YAEa0F,EAAGzF,EAFhB,qBAIDyB,OAAO,OACPY,KAAK,UAIP,cAAC,EAAD,CAAOhB,GAAIkE,EAAGxF,EAAGuB,GAAIiE,EAAGvF,EAAGuB,GAAImE,EAAE3F,EAAGyB,GAAI+D,EAAGvF,EAAGyB,OAAO,SACrD,cAAC,EAAD,CAAOJ,GAAIqE,EAAE3F,EAAGuB,GAAIiE,EAAGvF,EAAGuB,GAAImE,EAAE3F,EAAGyB,GAAIkE,EAAE1F,EAAGyB,OAAO,SAGnD,cAAC,EAAD,CACEJ,GAAI0E,EAAOhG,EACXuB,GAAIyE,EAAO/F,EACXuB,GAAIyE,EAAKjG,EACTyB,GAAIwE,EAAKhG,EACT2B,UAAU,WAEZ,cAAC,EAAD,CACEN,GAAI6E,EAAOnG,EACXuB,GAAI4E,EAAOlG,EACXuB,GAAI4E,EAAKpG,EACTyB,GAAI2E,EAAKnG,EACT2B,UAAU,QAIZ,wBACEA,UAAU,iBACVmF,GAAIvB,EAAGxF,EACPgH,GAAIxB,EAAGvF,EACPgH,EAAE,IACFC,YAAa,kBAAM9B,EAASrC,EAAUR,EAAYiB,UAEpD,wBACE5B,UAAU,kBACVmF,GAAItB,EAAGzF,EACPgH,GAAIvB,EAAGxF,EACPgH,EAAE,IACFC,YAAa,kBAAM9B,EAASrC,EAAUR,EAAYkB,UAEpD,wBACE7B,UAAU,eACVmF,GAAIrB,EAAG1F,EACPgH,GAAItB,EAAGzF,EACPgH,EAAE,IACFC,YAAa,kBAAM9B,EAASrC,EAAUR,EAAYmB,UAIpD,wBACE9B,UAAU,gBACVmF,GAAIpB,EAAE3F,EACNgH,GAAIrB,EAAE1F,EACNgH,EAAE,IACFC,YAAa,kBAAM9B,EAASrC,EAAUR,EAAYgB,WAItD,sBAAKkD,MAAO,CAAEC,SAAU,WAAYvC,KAAMwB,EAAE3F,EAAI,EAAGoE,IAAKuB,EAAE1F,EAAI,GAA9D,UACE,sBAAM2B,UAAU,SAAhB,eACA,sBAAMA,UAAU,QAAhB,SAAyByE,IACzB,sBAAMzE,UAAU,SAAhB,eACA,sBAAMA,UAAU,SAAhB,SAA0B2E,IAC1B,sBAAM3E,UAAU,SAAhB,eACA,sBAAMA,UAAU,MAAhB,SAAuB4E,IACvB,sBAAM5E,UAAU,SAAhB,qBAIJ,sBAAKA,UAAU,eAAf,8BACmB,qBAAKA,UAAU,cADlC,IAEE,qBAAKA,UAAU,eAFjB,mJAIqC,qBAAKA,UAAU,aAJpD,YE7ISuF,G,MAbY,WACzB,OACE,qBAAKvF,UAAU,OAAf,SACE,sBAAKA,UAAU,aAAf,UACE,+CACA,8BACE,cAAC,IAAD,CAAMwF,GAAG,cAAT,8CCWKC,EAhBW,WACxB,OACE,cAAC,IAAD,CAAQC,SAAUC,MAAlB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,eAAZ,SACE,cAAC,EAAD,MAGF,cAAC,IAAD,CAAOA,KAAK,IAAZ,SACE,cAAC,EAAD,Y,MCTVC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFzC,SAAS0C,eAAe,W","file":"static/js/main.38454b5b.chunk.js","sourcesContent":["export class Vec2 {\n  constructor(public x: number, public y: number) {}\n\n  plus(rhs: Vec2): Vec2 {\n    return new Vec2(this.x + rhs.x, this.y + rhs.y);\n  }\n\n  minus(rhs: Vec2): Vec2 {\n    return new Vec2(this.x - rhs.x, this.y - rhs.y);\n  }\n\n  scale(f: number): Vec2 {\n    return new Vec2(f * this.x, f * this.y);\n  }\n\n  scaleTo(len: number): Vec2 {\n    const currentLen = this.len();\n    if (currentLen === 0) {\n      return this;\n    }\n\n    const f = len / currentLen;\n    return this.scale(f);\n  }\n\n  rotate(theta: number): Vec2 {\n    const cos = Math.cos(theta);\n    const sin = Math.sin(theta);\n    return new Mat2(cos, sin, -sin, cos).timesVec(this);\n  }\n\n  len(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n}\n\nexport class Mat2 {\n  // | a  c |\n  // | b  d |\n  // prettier-ignore\n  constructor(\n    public a: number, public b: number,\n    public c: number, public d: number,\n  ) {}\n\n  timesVec(rhs: Vec2): Vec2 {\n    const { a, b, c, d } = this;\n    const { x, y } = rhs;\n    return new Vec2(a * x + c * y, b * x + d * y);\n  }\n\n  leftInv(): Mat2 {\n    const { a, b, c, d } = this;\n    const det = a * d - b * c;\n    return new Mat2(d, -c, -b, a).scale(1 / det);\n  }\n\n  scale(f: number): Mat2 {\n    const { a, b, c, d } = this;\n    return new Mat2(f * a, f * b, f * c, f * d);\n  }\n}\n","import classNames from 'classnames';\nimport { Vec2 } from './maths';\n\ninterface ArrowProps {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  stroke?: string;\n  strokeWidth?: number;\n  className?: string;\n}\n\nconst Arrow: React.FC<ArrowProps> = props => {\n  const { x1, y1, x2, y2, stroke, strokeWidth, className } = props;\n\n  const base = new Vec2(x2 - x1, y2 - y1);\n  const wing1 = base.rotate(Math.PI / 10).scaleTo(15);\n  const wing2 = wing1.rotate(-Math.PI / 5);\n  const corner1 = new Vec2(x2, y2).minus(wing1);\n  const corner2 = new Vec2(x2, y2).minus(wing2);\n\n  return (\n    <g className={classNames(className, 'arrow')}>\n      <line\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={stroke}\n        strokeWidth={strokeWidth}\n      />\n      <path\n        d={`M ${x2} ${y2}\n            L ${corner1.x} ${corner1.y}\n            L ${corner2.x} ${corner2.y}\n            Z`}\n        fill={stroke}\n      />\n    </g>\n  );\n};\n\nexport default Arrow;\n","import React from 'react';\nimport Arrow from './Arrow';\nimport { useMousePos } from './hooks';\nimport { Vec2, Mat2 } from './maths';\nimport { Action } from './action';\nimport './BarycentricDemo.css';\n\nconst WIDTH = 966;\nconst HEIGHT = 600;\n\nenum DragSubject {\n  Origin = 'Origin',\n  Tri1 = 'Tri1',\n  Tri2 = 'Tri2',\n  Tri3 = 'Tri3',\n  Pt = 'Pt',\n}\n\nconst BarycentricDemo: React.FC<{}> = () => {\n  const ref = useMousePos({\n    onChange: (x, y) => dispatch(moveMouse(x, y)),\n    onUp: () => dispatch(stopDrag()),\n  });\n  const [state, dispatch] = React.useReducer(reducer, initState);\n\n  const { origin, tri1, tri2, tri3, pt } = state;\n\n  function toScreenSpace(pt: Vec2): Vec2 {\n    return new Vec2(origin.x + pt.x, origin.y - pt.y);\n  }\n\n  // Transform triangle points and `pt` into our (svg) \"screen\" space\n  const [t1, t2, t3, p] = [tri1, tri2, tri3, pt].map(toScreenSpace);\n\n  const u = t2.minus(t1);\n  const v = t3.minus(t1);\n  const changeOfBasis = new Mat2(u.x, v.x, u.y, v.y).leftInv();\n  const baryCoords = changeOfBasis.timesVec(p.minus(t1));\n\n  // Additional points for indicating the position of `pt` in terms of\n  // its barycentric coordinates\n  const uStart = t1;\n  const uEnd = t1.plus(t2.minus(t1).scale(baryCoords.x));\n  const vStart = uEnd;\n  const vEnd = vStart.plus(t3.minus(t1).scale(baryCoords.y));\n\n  // Contributions from each of the triangle's corners\n  const f1 = (1 - baryCoords.x - baryCoords.y).toPrecision(2);\n  const f2 = baryCoords.x.toPrecision(2);\n  const f3 = baryCoords.y.toPrecision(2);\n\n  return (\n    <div className=\"barycentric-demo\">\n      <div style={{ position: 'relative' }}>\n        <svg\n          ref={ref}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width={WIDTH}\n          height={HEIGHT}\n          viewBox={`0 0 ${WIDTH} ${HEIGHT}`}\n        >\n          {/* Origin */}\n          <Arrow\n            x1={origin.x}\n            y1={origin.y}\n            x2={origin.x + 60}\n            y2={origin.y}\n            className=\"gray-2\"\n          />\n          <Arrow\n            x1={origin.x}\n            y1={origin.y}\n            x2={origin.x}\n            y2={origin.y - 60}\n            className=\"gray-2\"\n          />\n          <circle\n            className=\"moveable gray-2\"\n            cx={origin.x}\n            cy={origin.y}\n            r=\"6\"\n            onMouseDown={() => dispatch(startDrag(DragSubject.Origin))}\n          />\n\n          {/* Triangle */}\n          <path\n            d={`M ${t1.x} ${t1.y}\n              L ${t2.x} ${t2.y}\n              L ${t3.x} ${t3.y}\n              Z`}\n            stroke=\"#ddd\"\n            fill=\"#ddd5\"\n          />\n\n          {/* Coordinates w.r.t. triangle's \"base point\" (`tri1`) */}\n          <Arrow x1={t1.x} y1={t1.y} x2={p.x} y2={t1.y} stroke=\"#ddd\" />\n          <Arrow x1={p.x} y1={t1.y} x2={p.x} y2={p.y} stroke=\"#ddd\" />\n\n          {/* Barycentric Info */}\n          <Arrow\n            x1={uStart.x}\n            y1={uStart.y}\n            x2={uEnd.x}\n            y2={uEnd.y}\n            className=\"yellow\"\n          />\n          <Arrow\n            x1={vStart.x}\n            y1={vStart.y}\n            x2={vEnd.x}\n            y2={vEnd.y}\n            className=\"red\"\n          />\n\n          {/* Triangle handles */}\n          <circle\n            className=\"moveable green\"\n            cx={t1.x}\n            cy={t1.y}\n            r=\"6\"\n            onMouseDown={() => dispatch(startDrag(DragSubject.Tri1))}\n          />\n          <circle\n            className=\"moveable yellow\"\n            cx={t2.x}\n            cy={t2.y}\n            r=\"6\"\n            onMouseDown={() => dispatch(startDrag(DragSubject.Tri2))}\n          />\n          <circle\n            className=\"moveable red\"\n            cx={t3.x}\n            cy={t3.y}\n            r=\"6\"\n            onMouseDown={() => dispatch(startDrag(DragSubject.Tri3))}\n          />\n\n          {/* Free Point */}\n          <circle\n            className=\"moveable blue\"\n            cx={p.x}\n            cy={p.y}\n            r=\"6\"\n            onMouseDown={() => dispatch(startDrag(DragSubject.Pt))}\n          />\n        </svg>\n\n        <div style={{ position: 'absolute', left: p.x + 5, top: p.y + 3 }}>\n          <span className=\"gray-1\">(</span>\n          <span className=\"green\">{f1}</span>\n          <span className=\"gray-1\">,</span>\n          <span className=\"yellow\">{f2}</span>\n          <span className=\"gray-1\">,</span>\n          <span className=\"red\">{f3}</span>\n          <span className=\"gray-1\">)</span>\n        </div>\n      </div>\n\n      <div className=\"instructions\">\n        All points (e.g. <div className=\"dot green\"></div>,\n        <div className=\"dot yellow\"></div>) can be dragged with the cursor. The\n        ordered triple shows contributions from each of the triangle's corners\n        at the location of the blue point (<div className=\"dot blue\"></div>).\n      </div>\n    </div>\n  );\n};\n\ninterface State {\n  // Relative to svg element\n  origin: Vec2;\n\n  // Relative to origin\n  tri1: Vec2;\n  tri2: Vec2;\n  tri3: Vec2;\n  pt: Vec2;\n\n  drag: DragSubject | null;\n}\n\nconst initState: State = {\n  origin: new Vec2(140, 500),\n  tri1: new Vec2(160, 140),\n  tri2: new Vec2(280, 400),\n  tri3: new Vec2(500, 200),\n  pt: new Vec2(340, 270),\n  drag: null,\n};\n\nfunction moveMouse(x: number, y: number): Action {\n  return {\n    type: 'MOVE_MOUSE',\n    payload: new Vec2(x, y),\n  };\n}\n\nfunction stopDrag(): Action {\n  return {\n    type: 'STOP_DRAG',\n  };\n}\n\nfunction startDrag(drag: DragSubject): Action {\n  return {\n    type: 'START_DRAG',\n    payload: drag,\n  };\n}\n\nfunction fromScreenSpace(origin: Vec2, pt: Vec2): Vec2 {\n  return new Vec2(pt.x - origin.x, origin.y - pt.y);\n}\n\nfunction reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'MOVE_MOUSE':\n      if (!state.drag) {\n        return state;\n      } else {\n        const key: string = dragSubjectToKey(state.drag);\n        if (key === 'origin') {\n          return { ...state, [key]: action.payload };\n        } else {\n          return {\n            ...state,\n            [key]: fromScreenSpace(state.origin, action.payload),\n          };\n        }\n      }\n    case 'START_DRAG':\n      return {\n        ...state,\n        drag: action.payload,\n      };\n    case 'STOP_DRAG':\n      return {\n        ...state,\n        drag: null,\n      };\n    default:\n      return state;\n  }\n}\n\nfunction dragSubjectToKey(drag: DragSubject): keyof State {\n  switch (drag) {\n    case DragSubject.Origin:\n      return 'origin';\n    case DragSubject.Pt:\n      return 'pt';\n    case DragSubject.Tri1:\n      return 'tri1';\n    case DragSubject.Tri2:\n      return 'tri2';\n    case DragSubject.Tri3:\n      return 'tri3';\n  }\n}\n\nexport default BarycentricDemo;\n","import React from 'react';\n\nexport interface UseMousePos {\n  onChange: (x: number, y: number) => any;\n  onUp: () => any;\n}\n\nexport function useMousePos({\n  onChange,\n  onUp,\n}: UseMousePos): React.RefObject<any> {\n  const ref: React.RefObject<any> = React.useRef(null);\n  const [bounds, setBounds] = React.useState({ left: 0, top: 0 });\n\n  React.useEffect(() => {\n    function recomputeBounds() {\n      if (ref.current !== null) {\n        const { left, top } = ref.current.getBoundingClientRect();\n        setBounds({ left, top });\n      }\n    }\n\n    recomputeBounds();\n\n    window.addEventListener('resize', recomputeBounds);\n    return () => window.removeEventListener('resize', recomputeBounds);\n  }, [ref, setBounds]);\n\n  React.useEffect(() => {\n    function handleMove(e: MouseEvent) {\n      const { left, top } = bounds;\n      const { clientX, clientY } = e;\n\n      onChange(clientX - left, clientY - top);\n    }\n\n    document.addEventListener('mousemove', handleMove);\n    return () => document.removeEventListener('mousemove', handleMove);\n  }, [bounds, onChange]);\n\n  React.useEffect(() => {\n    document.addEventListener('mouseup', onUp);\n    return () => document.removeEventListener('mouseup', onUp);\n  }, [onUp]);\n\n  return ref;\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './Home.css';\n\nconst Home: React.FC<{}> = () => {\n  return (\n    <div className=\"home\">\n      <div className=\"home__menu\">\n        <h1>3D Playground</h1>\n        <div>\n          <Link to=\"barycentric\">Barycentric Coordinates</Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport BarycentricDemo from './BarycentricDemo';\nimport Home from './Home';\n\nconst App: React.FC<{}> = () => {\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <Switch>\n        <Route path=\"/barycentric\">\n          <BarycentricDemo />\n        </Route>\n\n        <Route path=\"/\">\n          <Home />\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}