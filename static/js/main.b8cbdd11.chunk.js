(this.webpackJsonp3d=this.webpackJsonp3d||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(22),s=n.n(a),i=n(13),o=n(2),u=n(11),l=n(8),x=n(3),f=n(15),j=n.n(f),h=n(16),d=n(17),y=function(){function e(t,n){Object(h.a)(this,e),this.x=t,this.y=n}return Object(d.a)(e,[{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"scale",value:function(t){return new e(t*this.x,t*this.y)}},{key:"scaleTo",value:function(e){var t=this.len();if(0===t)return this;var n=e/t;return this.scale(n)}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e);return new b(t,n,-n,t).timesVec(this)}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),e}(),b=function(){function e(t,n,r,c){Object(h.a)(this,e),this.a=t,this.b=n,this.c=r,this.d=c}return Object(d.a)(e,[{key:"timesVec",value:function(e){var t=this.a,n=this.b,r=this.c,c=this.d,a=e.x,s=e.y;return new y(t*a+r*s,n*a+c*s)}},{key:"leftInv",value:function(){var t=this.a,n=this.b,r=this.c,c=this.d,a=t*c-n*r;return new e(c,-r,-n,t).scale(1/a)}},{key:"scale",value:function(t){return new e(t*this.a,t*this.b,t*this.c,t*this.d)}}]),e}(),m=function(){function e(t,n,r){Object(h.a)(this,e),this.x=t,this.y=n,this.z=r}return Object(d.a)(e,[{key:"scale",value:function(t){return new e(t*this.x,t*this.y,t*this.z)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}}],[{key:"fromArray",value:function(t){var n=Object(x.a)(t,3);return new e(n[0],n[1],n[2])}}]),e}(),v=n(0),O=function(e){var t=e.x1,n=e.y1,r=e.x2,c=e.y2,a=e.stroke,s=e.strokeWidth,i=e.className,o=new y(r-t,c-n).rotate(Math.PI/10).scaleTo(15),u=o.rotate(-Math.PI/5),l=new y(r,c).minus(o),x=new y(r,c).minus(u);return Object(v.jsxs)("g",{className:j()(i,"arrow"),children:[Object(v.jsx)("line",{x1:t,y1:n,x2:r,y2:c,stroke:a,strokeWidth:s}),Object(v.jsx)("path",{d:"M ".concat(r," ").concat(c,"\n            L ").concat(l.x," ").concat(l.y,"\n            L ").concat(x.x," ").concat(x.y,"\n            Z"),fill:a})]})};n(24);var p;n(30);!function(e){e.Origin="Origin",e.Tri1="Tri1",e.Tri2="Tri2",e.Tri3="Tri3",e.Pt="Pt"}(p||(p={}));var g={origin:new y(140,500),tri1:new y(160,140),tri2:new y(280,400),tri3:new y(500,200),pt:new y(340,270),drag:null};function w(e){return{type:"START_DRAG",payload:e}}function N(e,t){switch(t.type){case"MOVE_MOUSE":if(e.drag){var n=function(e){switch(e){case p.Origin:return"origin";case p.Pt:return"pt";case p.Tri1:return"tri1";case p.Tri2:return"tri2";case p.Tri3:return"tri3"}}(e.drag);return"origin"===n?Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},n,t.payload)):Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},n,(r=e.origin,c=t.payload,new y(c.x-r.x,r.y-c.y))))}return e;case"START_DRAG":return Object(l.a)(Object(l.a)({},e),{},{drag:t.payload});case"STOP_DRAG":return Object(l.a)(Object(l.a)({},e),{},{drag:null});default:return e}var r,c}var k=function(){var e=function(e){var t=e.onChange,n=e.onUp,r=c.a.useRef(null),a=c.a.useState({left:0,top:0}),s=Object(x.a)(a,2),i=s[0],o=s[1];return c.a.useEffect((function(){function e(){if(null!==r.current){var e=r.current.getBoundingClientRect(),t=e.left,n=e.top;o({left:t,top:n})}}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r,o]),c.a.useEffect((function(){function e(e){var n=i.left,r=i.top,c=e.clientX,a=e.clientY;t(c-n,a-r)}return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}),[i,t]),c.a.useEffect((function(){return document.addEventListener("mouseup",n),function(){return document.removeEventListener("mouseup",n)}}),[n]),r}({onChange:function(e,t){return a(function(e,t){return{type:"MOVE_MOUSE",payload:new y(e,t)}}(e,t))},onUp:function(){return a({type:"STOP_DRAG"})}}),t=c.a.useReducer(N,g),n=Object(x.a)(t,2),r=n[0],a=n[1],s=r.origin;var i=[r.tri1,r.tri2,r.tri3,r.pt].map((function(e){return new y(s.x+e.x,s.y-e.y)})),o=Object(x.a)(i,4),u=o[0],l=o[1],f=o[2],j=o[3],h=l.minus(u),d=f.minus(u),m=new b(h.x,d.x,h.y,d.y).leftInv().timesVec(j.minus(u)),k=u,M=u.plus(l.minus(u).scale(m.x)),E=M,T=E.plus(f.minus(u).scale(m.y)),A=(1-m.x-m.y).toPrecision(2),z=m.x.toPrecision(2),_=m.y.toPrecision(2);return Object(v.jsxs)("div",{className:"barycentric-demo",children:[Object(v.jsxs)("div",{style:{position:"relative"},children:[Object(v.jsxs)("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:966,height:600,viewBox:"0 0 ".concat(966," ").concat(600),children:[Object(v.jsx)(O,{x1:s.x,y1:s.y,x2:s.x+60,y2:s.y,className:"gray-2"}),Object(v.jsx)(O,{x1:s.x,y1:s.y,x2:s.x,y2:s.y-60,className:"gray-2"}),Object(v.jsx)("circle",{className:"moveable gray-2",cx:s.x,cy:s.y,r:"6",onMouseDown:function(){return a(w(p.Origin))}}),Object(v.jsx)("path",{d:"M ".concat(u.x," ").concat(u.y,"\n              L ").concat(l.x," ").concat(l.y,"\n              L ").concat(f.x," ").concat(f.y,"\n              Z"),stroke:"#ddd",fill:"#ddd5"}),Object(v.jsx)(O,{x1:u.x,y1:u.y,x2:j.x,y2:u.y,stroke:"#ddd"}),Object(v.jsx)(O,{x1:j.x,y1:u.y,x2:j.x,y2:j.y,stroke:"#ddd"}),Object(v.jsx)(O,{x1:k.x,y1:k.y,x2:M.x,y2:M.y,className:"yellow"}),Object(v.jsx)(O,{x1:E.x,y1:E.y,x2:T.x,y2:T.y,className:"red"}),Object(v.jsx)("circle",{className:"moveable green",cx:u.x,cy:u.y,r:"6",onMouseDown:function(){return a(w(p.Tri1))}}),Object(v.jsx)("circle",{className:"moveable yellow",cx:l.x,cy:l.y,r:"6",onMouseDown:function(){return a(w(p.Tri2))}}),Object(v.jsx)("circle",{className:"moveable red",cx:f.x,cy:f.y,r:"6",onMouseDown:function(){return a(w(p.Tri3))}}),Object(v.jsx)("circle",{className:"moveable blue",cx:j.x,cy:j.y,r:"6",onMouseDown:function(){return a(w(p.Pt))}})]}),Object(v.jsxs)("div",{style:{position:"absolute",left:j.x+5,top:j.y+3},children:[Object(v.jsx)("span",{className:"gray-1",children:"("}),Object(v.jsx)("span",{className:"green",children:A}),Object(v.jsx)("span",{className:"gray-1",children:","}),Object(v.jsx)("span",{className:"yellow",children:z}),Object(v.jsx)("span",{className:"gray-1",children:","}),Object(v.jsx)("span",{className:"red",children:_}),Object(v.jsx)("span",{className:"gray-1",children:")"})]})]}),Object(v.jsxs)("div",{className:"instructions",children:["All points (e.g. ",Object(v.jsx)("div",{className:"dot green"}),",",Object(v.jsx)("div",{className:"dot yellow"}),") can be dragged with the cursor. The ordered triple shows contributions from each of the triangle's corners at the location of the blue point (",Object(v.jsx)("div",{className:"dot blue"}),")."]})]})};function M(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}n(31);var E=function(e){var t=c.a.useState(1),n=Object(x.a)(t,2),r=n[0],a=n[1],s=c.a.useState(!1),i=Object(x.a)(s,2),o=i[0],u=i[1],l=e.className,f=e.placeholder,h=e.value,d=e.onChange,y=c.a.useCallback((function(e){var t=e.split(/\r\n|\n|\r/).length;a(t)}),[a]);return c.a.useEffect((function(){y(h)}),[y,h]),Object(v.jsx)("div",{className:j()("simple-editor",l,{focused:o}),children:Object(v.jsxs)("div",{className:"simple-editor__scroller",children:[Object(v.jsx)("div",{className:"simple-editor__line-numbers",children:M(1,r+1).map((function(e){return Object(v.jsx)("div",{children:e},e)}))}),Object(v.jsx)("textarea",{value:h,onChange:function(e){var t=e.target.value;y(t),d(t)},placeholder:f,onFocus:function(){u(!0)},onBlur:function(){u(!1)},spellCheck:"false"})]})})},T=(n(32),640),A=480,z=10,_=10,C=10;function P(e,t,n){var r=Math.floor(e.x),c=Math.floor(e.y),a=64*c+r;if(!(n[a]<=e.z)){n[a]=e.z;for(var s=c*z;s<c*z+z;s++)for(var i=r*z;i<r*z+z;i++){var o=4*(s*T+i);t.data[o]=e.color[0],t.data[o+1]=e.color[1],t.data[o+2]=e.color[2],t.data[o+3]=255}}}function S(e){var t=e.split(",").map((function(e){return e.trim()}));if(4===t.length){var n=Object(x.a)(t,4),r=n[0],c=n[1],a=n[2],s=function(e){var t="\\d|[a-f]|[A-F]",n=new RegExp("^#(?<r>(".concat(t,")(").concat(t,"))(?<g>(").concat(t,")(").concat(t,"))(?<b>(").concat(t,")(").concat(t,"))$")).exec(e);if(!n)return;var r=n.groups,c=r.r,a=r.g,s=r.b;return[parseInt(c,16),parseInt(a,16),parseInt(s,16)]}(n[3]);if(void 0!==s)return{x:Number(r),y:Number(c),z:Math.floor(Number(a)),color:s}}}function D(e){var t=e.split(",").map((function(e){return e.trim()}));if(3===t.length){var n=Object(x.a)(t,3),r=n[0],c=n[1],a=n[2];return[Number(r),Number(c),Number(a)]}}function I(e){return e.split(/\r\n|\r|\n/).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))}var R=function(){return Object(v.jsxs)("svg",{width:660,height:500,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(660," ").concat(500),style:{position:"absolute",left:"-".concat(C,"px"),top:"-".concat(C,"px")},children:[Object(v.jsx)(O,{x1:C,y1:C,x2:110,y2:C,className:"blue"}),Object(v.jsx)(O,{x1:C,y1:C,x2:C,y2:110,className:"blue"}),M(0,6.4).map((function(e){return Object(v.jsx)("line",{x1:C+e*_*z,y1:5,x2:C+e*_*z,y2:C,className:"blue"},e)})),M(0,4.8).map((function(e){return Object(v.jsx)("line",{x1:5,y1:C+e*_*z,x2:C,y2:C+e*_*z,className:"blue"},e)}))]})},L=function(){var e=c.a.useState("10, 10, 10, #770055\n40, 23, 0, #ff00ff\n5, 34, 5, #aa0099\n3, 22, 0, #ffff00\n55, 5, 15, #996600\n15, 45, 10, #aa8800"),t=Object(x.a)(e,2),n=t[0],r=t[1],a=c.a.useState("1, 2, 3\n4, 5, 6"),s=Object(x.a)(a,2),i=s[0],o=s[1],u=function(e){var t=c.a.useRef(null),n=c.a.useState(),r=Object(x.a)(n,2),a=r[0],s=r[1];return c.a.useEffect((function(){null!==t.current&&s(t.current.getContext("2d",e))}),[e]),[a,t]}({alpha:!1}),l=Object(x.a)(u,2),f=l[0],j=l[1],h=c.a.useCallback((function(e,t){var n=function(e,t){var n=I(e).map(S).filter((function(e){return void 0!==e})),r=I(t).map(D).filter((function(e){return void 0!==e}));return{vertices:n,tris:r}}(e,t);if(n&&void 0!==f){var r=f.getImageData(0,0,T,A);!function(e,t){!function(e,t){for(var n=0;n<e.data.length;n+=4)e.data[n]=t[0],e.data[n+1]=t[1],e.data[n+2]=t[2],e.data[n+3]=255}(t,[250,250,250]);var n=new Uint8ClampedArray(3072);n.fill(255),e.vertices.forEach((function(e){return P(e,t,n)})),e.tris.forEach((function(r){return function(e,t,n,r){if(e.some((function(e){return e<1||e>t.length})))return;for(var c=e.map((function(e){return t[e-1]})),a=Object(x.a)(c,3),s=a[0],i=a[1],o=a[2],u=Math.min(s.x,i.x,o.x,0),l=Math.min(s.y,i.y,o.y,0),f=Math.max(s.x,i.x,o.x,64),j=Math.max(s.y,i.y,o.y,48),h=new y(i.x-s.x,i.y-s.y),d=new y(o.x-s.x,o.y-s.y),v=new b(h.x,d.x,h.y,d.y).leftInv(),O=u;O<f;O++)for(var p=l;p<j;p++){var g=new y(O-s.x,p-s.y),w=v.timesVec(g),N=1-w.x-w.y,k=w.x,M=w.y;if(!(N<0||k<0||M<0||N>=1||k>=1||M>=1))P({x:O,y:p,z:N*s.z+k*i.z+M*o.z,color:m.fromArray(s.color).scale(N).plus(m.fromArray(i.color).scale(k)).plus(m.fromArray(o.color).scale(M)).toArray()},n,r)}}(r,e.vertices,t,n)}))}(n,r),f.putImageData(r,0,0)}}),[f]);return c.a.useEffect((function(){h(n,i)}),[n,i,h]),Object(v.jsxs)("div",{className:"triangles-demo",children:[Object(v.jsxs)("div",{className:"canvas-container",children:[Object(v.jsx)("canvas",{ref:j,width:T,height:A}),Object(v.jsx)(R,{})]}),Object(v.jsxs)("div",{className:"editors",children:[Object(v.jsx)(E,{className:"vertex-editor",placeholder:"Enter vertices here, e.g.\n1.0, 2.0, 1.5, #ff0000",value:n,onChange:function(e){r(e),h(e,i)}}),Object(v.jsx)(E,{className:"face-editor",placeholder:"Enter faces here, e.g.\n1, 6, 5",value:i,onChange:function(e){o(e),h(n,e)}})]})]})},B=(n(33),function(){return Object(v.jsx)("div",{className:"home",children:Object(v.jsxs)("div",{className:"home__menu",children:[Object(v.jsx)("h1",{children:"3D Playground"}),Object(v.jsxs)("div",{className:"home__menu-links",children:[Object(v.jsx)(i.b,{to:"barycentric",children:"Barycentric Coordinates"}),Object(v.jsx)(i.b,{to:"triangles",children:"Painting Triangles"})]})]})})}),V=function(){return Object(v.jsx)(i.a,{children:Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/barycentric",children:Object(v.jsx)(k,{})}),Object(v.jsx)(o.a,{path:"/triangles",children:Object(v.jsx)(L,{})}),Object(v.jsx)(o.a,{path:"/",children:Object(v.jsx)(B,{})})]})})};n(42);s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(V,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b8cbdd11.chunk.js.map